%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                %%
%% Esimerkki opinnytteen tekemisest LaTeX:lla 20100316          %%
%% Alkuperinen versio Luis Costa,  muutokset Perttu Puska        %%
%%                                                                %%
%% Thn esimerkkiin kuuluu tiedostot                             %%
%%               opinnaytepohja.tex (versio 1.3)                  %%
%%               aaltothesis.sty (versio 1.3)                     %%
%%               kuva1.eps                                        %%
%%               kuva2.eps                                        %%
%%                                                                %%
%%                                                                %%
%% Kntminen                                                    %%
%% latex:                                                         %%
%%             $ latex opinnaytepohja                             %%
%%             $ latex opinnaytepohja                             %%
%%                                                                %%
%%   Tuloksena on tiedosto opinnayte.dvi, joka                    %%
%%   muutetaan ps-muotoon seuraavasti                             %%
%%                                                                %%
%%             $ dvips opinnaytepohja -o                          %%
%%                                                                %%
%% Selittvt kommentit on tss esimerkiss varustettu           %%
%% %%-merkeill ja muutokset, joita kyttj voi tehd,           %%
%% on varustettu %-merkeill                                      %%
%%                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Kyt nit, jos kirjoitat suomeksi
%%
%% Use these you write in Finnish
\documentclass[finnish,12pt]{article}
%% Kyt nit, jos kirjoitat englanniksi
%%
%% Uncomment these if you write in English
%\documentclass[english,12pt]{article}

%% Tm paketti on pakollinen
%%
%% This package is required
\usepackage{aaltothesis}

\usepackage{natbib}
\bibliographystyle{plain} % finplain

% \usepackage[utf8]{inputenc}
%% Jos kytt latex-komentoa knnettess (oletusarvo) 
%% kuvat kannattaa tehd eps-muotoon. l kyt ps-muotoisia kuvia!
%% Kyt seuraavaa latex-komennon ja eps-kuvien kanssa 
%%
%% Use this if you run latex and use eps-format pictures
\usepackage[dvips]{graphicx}

%% Jos ts kytt pdflatex-komentoa, 
%% joka knt tekstin suoraan pdf-tiedostoksi ja kuvasi
%% ovat esim. jpg-formaatissa tai pdf-formaatissa,   
%% kytetn seuraavaa pakettia, kommentoi siis kommenttimerkki pois
%% Huom! Tekstin marginaalit saattavat poiketa n. 2-5 mm
%% suosituksesta, jos kytt pdflatex-komentoa!
%% 
%% Use this if you run pdflatex and use jpg/pdf-format pictures
%% Note that margins are not correct with pdflatex output. 
%\usepackage[pdftex]{graphicx} 

%% Saat pdf-tiedoston viittaukset ja linkit kuntoon seuraavalla paketilla.
%% Paketti toimii erityisen hyvin pdflatexin kanssa. 
%%
%% Use this if you want to get links and nice output with pdflatex
\usepackage[pdfpagemode=None,colorlinks=true,urlcolor=red,%
linkcolor=blue,citecolor=black,pdfstartview=FitH]{hyperref}

%% Jos et jostain syyst tykk kytt
%% edellist hyperref pakettia, voit kytt mys seuraavaa pakettia
%% (tarvitaan lhinn url-komennon mrittmiseen ja formatoimiseen)
%%
%% Use this if you do not like hyperref package - this
%% defines url environment and formats it correctly

% \usepackage{url}
%% Matematiikan fontteja, symboleja ja muotoiluja lis, nit tarvitaan usein 
%%
%% Use this if you write hard core mathematics, these are usually needed
\usepackage{amsfonts,amssymb,amsbsy}  

%% Vaakasuunnan mitat, L KOSKE!
\setlength{\hoffset}{-1in}
\setlength{\oddsidemargin}{35mm}
\setlength{\evensidemargin}{25mm}
\setlength{\textwidth}{15cm}
%% Pystysuunnan mitat, L KOSKE!
\setlength{\voffset}{-1in}
\setlength{\headsep}{7mm}
\setlength{\headheight}{1em}
\setlength{\topmargin}{25mm-\headheight-\headsep}
\setlength{\textheight}{23cm}


%% Kaikki mik paperille tulostuu, on tmn jlkeen
%%
%% Output starts here
\begin{document}

%% Korjaa vastaamaan korkeakouluasi
%%
%% Change the school field to describe your school 
\university{aalto university}{Aalto-yliopisto}
\school{School of science and technology}{Teknillinen korkeakoulu}

%% Korjaa seuraavat vastaamaan omaa tiedekuntaasi
%%
%% Change the faculty field to describe your faculty
\faculty{Faculty of Electronics, Communications and Automation}%
{Elektroniikan, tietoliikenteen ja automaation tiedekunta}%
%%

%% Vain kanditylle: Korjaa seuraavat vastaamaan tutkinto-ohjelmaasi
%%
%% Only for B.Sc. thesis: Choose your degree programme. 
\degreeprogram{Automation and control engineering}%
{Automaatio- ja säätötekniikka}
%%

%% Vain DI/M.Sc.- ja lisensiaatintylle: valitse laitos, 
%% professuuri ja sen professuurikoodi. 
%%
%% Only for M.Sc. and Licentiate thesis: Choose your department,
%% professorship and professorship code. 
%\department{Department of Radio Science and Technology}%
%{Radiotieteen ja -tekniikan laitos}
%\professorship{Circuit theory}{Piiriteoria}
%\code{S-55}
%%

%% Valitse yksi nist kolmesta
%%
%% Choose one of these:
\univdegree{BSc}
%\univdegree{MSc}
%\univdegree{Lic}

%% Oma nimi
%%
%% Should be self explanatory...
\author{Konsta Hölttä}

%% Opinnytteen otsikko tulee vain thn. l tavuta otsikkoa ja
%% vlt liian pitk otsikkoteksti. Jos latex ryhmittelee otsikon
%% huonosti, voit joutua pakottamaan rivinvaihdon \\ kontrollimerkill.
%% Muista ett otsikkoja ei tavuteta! 
%% Jos otsikossa on ja-sana, se ei j rivin viimeiseksi sanaksi 
%% vaan aloittaa uuden rivin.
%% 
%% Your thesis title. If the title is very long and the latex 
%% does unsatisfactory job of breaking the lines, you will have to
%% break the lines yourself with \\ control character. 
%% Do not hyphenate titles.
% TODO
\thesistitle{}{Esteenväistö- ja liikkeensuunnittelumenetelmät liikkuville roboteille
}

\place{Espoo}
%% Kandidaatintyn pivmr on sen esityspivmr! 
%% 
%% For B.Sc. thesis use the date when you present your thesis. 
\date{x.y.2010}

%% Kandidaattiseminaarin vastuuopettaja tai diplomityn valvoja.
%% Huomaa titteliss "\" -merkki pisteen jlkeen, 
%% ennen vlilynti ja seuraavaa merkkijonoa. 
%% Nin tehdn, koska kyseess ei ole lauseen loppu, jonka jlkeen tulee 
%% hieman pidempi vli vaan halutaan tavallinen vli.
%%
%% B.Sc. or M.Sc. thesis supervisor 
%% Note the "\" after the comma. This forces the following space to be 
%% a normal interword space, not the space that starts a new sentence. 
\supervisor{D.Sc.\ Ilkka Seilonen}{TkT Ilkka Seilonen}

%% Kandidaatintyn ohjaaja(t) tai diplomityn ohjaaja(t)
%% 
%% B.Sc. or M.Sc. thesis instructor(s)
%\instructor{Prof. Pirjo Professori}{Prof. Pirjo Professori}
\instructor{D.Sc.\ (Tech.) Jari Saarinen}{TkT Jari Saarinen}
%\instructor{M.Sc.\ (Tech.) Polli Pohjaaja}{DI Polli Pohjaaja}

%% Aaltologo: syntaksi: \uselogo{red|blue|yellow}{?|!|''}
%% Logon kieli on sama kuin dokumentin kieli
%%
%% Aalto logo: syntax: \uselogo{red|blue|yellow}{?|!|''} 
%% Logo language is set to be the same as the document language.
\uselogo{red}{''}{tkk}

%% Tehdn kansilehti
%%
%% Create the coverpage
\makecoverpage


%% Suomenkielinen tiivistelm
%% 
%% Finnish abstract
%%
%% Tiivistelmn avainsanat
\keywords{taika, musta magia, ydinfysiikka, rajatiede}
%% Tiivistelmn tekstiosa
\begin{abstractpage}[finnish]
Tutkitaan menetelmiä liikkuvien robottien reaaliaikaiseen esteenväistöön ja lokaaliin liikkeensuunnitteluun dynaamisessa ympristössä.

Eritellään eri anturointitekniikoita, niihin soveltuvia esteentunnistusalgoritmeja ja ohjausmenetelmiä maaliin pääsemiseksi osumatta ympäristön yllättäviin muutoksiin.
\end{abstractpage}

\newpage

\mysection{Esipuhe}
Glxblt. Huu haa, foo bar.\\

\vspace{5cm}
Otaniemi, x.y.2010

\vspace{5mm}
{\hfill Konsta Hölttä \hspace{1cm}}

\newpage


%% Sisllysluettelo
%% addcontentsline tekee pdf-tiedostoon viitteen sisllysluetteloa varten
\addcontentsline{toc}{section}{Sisällysluettelo}
\tableofcontents

\mysection{Symbolit ja lyhenteet}

\subsection*{Lyhenteet}

\begin{tabular}{ll}
VFH	&	vector field histogram \\
DWA	&	dynamic window approach \\
AGV	&	automated guided vehicle \\
RRT	&	rapidly-exploring random tree
\end{tabular}


%% Sivulaskurin viilausta opinnytteen vaatimusten mukaan:
%% Aloitetaan sivunumerointi arabialaisilla numeroilla (ja jtetn
%% leiptekstin ensimminen sivu tyhjksi, 
%% ks. alla \thispagestyle{empty}).
%% Pakotetaan lisksi ensimminen varsinainen tekstisivu alkamaan 
%% uudelta sivulta clearpage-komennolla. 
%% clearpage on melkein samanlainen kuin newpage, mutta 
%% flushaa mys LaTeX:n floatit 
%% 
%% Corrects the page numbering, there is no need to change these
\cleardoublepage
\storeinipagenumber
\pagenumbering{arabic}
\setcounter{page}{1}



\section{Johdanto}

\thispagestyle{empty}

Liikkuva robotti, robotin paikannus, esteenväistö sekä liikkeensuunnittelu ovat sellaisinaan hyvin laajoja käsitteitä. Tämän tekstin tarkoituksena on kartoittaa eri menetelmiä eri ympäristöihin, painottuen kuitenkin erityisesti ulkotiloissa maanpinnalla vaihtelevassa ympäristössä kulkeviin robotteihin. Tässä (ja myöhemmin) robotilla tarkoitetaan itsenäisesti liikkuvaa ajoneuvoa, kuten AGV:tä, eikä kiinteästi asennettavaa robottia kuten manipulaattorikäsivartta.

Lokaaliin anturipohjaiseen esteenväistöön on luonnollisesti monia eri menetelmiä, joiden hyödyllisyys ja soveltuvuus riippuu robotin ympäristöstä ja anturien laadusta. Universaalia kaikkialle sopivaa lokaalia esteenväistöä ei ole olemassa. On tosin monia yleisiä menetelmiä (potentiaalikenttä, neuroverkot, satunnaispuut, jne, TODO: parit referenssit tähän) ja tilannekohtaista heuristiikkaa. Myös aiemmista osittain jalostettuja kehittyneempiä tapoja (VFH jne) on saatu kartoittamalla heikkoudet ja soveltamalla tiettyyn ympäristöön; monia on testattu käytännössä ja jotkut ovat jääneet vain kaavoiksi.

Globaalia liikkeensuunnittelua (kartta tiedossa etukäteen jonka mukaan reitti suunnitellaan) sivutaan myös hieman. Tässä työssä keskitytään kuitenkin yhtäkkisten, odottamattomien esteiden havaitsemiseen ja väistämiseen kun jonkinlainen reitti on tiedossa ennalta -- joko aiemmin tarkasti suunniteltu kartta mutkineen ja risteyksineen, tai summittainen ohje luokkaa "50 metriä pohjoiseen". Reitin ja/tai ympäristön muutoksia saatetaan myös päivittää robotille reaaliajassa. Aina ei kuitenkaan voida saada mitään ennakkotietoa ympäristöstä, jossa robotti kulkee; tällöin tieto pitää kartoittaa matkan varrella.

Esteitä on havainnoitava jatkuvasti ja niitä voi väistää vasta havaitsemisen jlkeen. Yleisiä havainnointimenetelmiä ovat ultraäänianturit, laserskannerit ja konenäkö. Hyvillä menetelmillä anturointi onnistuu jatkuvasti; toisilla robotti joutuu välillä pysähtymään mittauksia varten.

Esteiden ohi selviämisen lisäksi robotin on pysyttävä reitillään ja sen on jotenkin saatava tietoa sijainnistaan ja suunnastaan. Tämäkin riippuu robotin antureista ja niiden sopivuudesta ympristöön. Yleisesti käytettyjä tapoja paikannukseen ovat mm. odometria, maamerkit, gps, radiomajakat ja näkyvien seinien/maanmuotojen vertaaminen karttaan. Kaikki tavat ovat tosin jossain määrin epätarkkoja, joten virhearviot on otettava huomioon ja mielellään käytettävä useampaa tapaa rinnakkain.

TODO: kielioppi; filtteröi: tajunnanvirta -> tiedeteksti.


\clearpage

\section{Taustatutkimus}

Aluksi on perehdyttävä tarkemmin aiheen käsitteisiin: mitä tarkoitetaan reitillä ja sen suunnittelulla? Mitä esteitä ylipäätään reitillä voi olla, ja millä tavoin niihin on suhtauduttava? Millaiset (matemaattiset) menetelmät robotin navigoinnin takana yleensä ovat?

Paljon tutkimusta on tehty \cite{bonin2008visual} ja sitä tätä.

\clearpage

\section{Navigointi ja liikkeensuunnittelu yleisesti}

\clearpage

\section{Esteenväistömenetelmiä}

\subsection{Potentiaalikenttä}

Keinopotentiaalikentät (artificial potential functions, artificial potential fields) ovat vanha \cite{rimon1992apf} mutta usein (sellaisenaan tai toisen navigointitavan pohjana) käytetty väistömenetelmä. Mitään oikeita fysikaalisia voimia nämä kentät eivät tuota robotille, jolloin kenttiä sanotaan keinotekoisiksi.

Tekniikan idea on, että robotin määränpää aiheuttaa robottiin voiman kohdetta päin tai reitin suuntaisesti. Jokainen lähistöllä oleva este vaikuttaa robotin potentiaalikenttään joka kokonaisuudessaan saa robotin hylkimään esteitä -- mitä lähemmäs estettä siirrytään, sitä suuremman ``voiman'' potentiaali aiheuttaa suoraan esteestä poispäin.

Potentiaalikenttiä käytetään myös robottimanipulaattoreilla, mutta ne soveltuvat liikkuvillekin roboteille.

Ongelmana etenkin lokaali minimi, jonne voi jäädä jumiin.

\cite{warren2002apf} \cite{vadakkepat2002eapf}


\subsection{Histogrammit}

Borestein ja Koren toteavat potentiaalikentät riittämättömiksi ja esittävät niihin pohjautuvan virtual force field -menetelmän \cite{koren1991potential} ja siitä edelleen kehittyneen vector field histogram -tekniikan \cite{borenstein2002vfh}. Virtuaalinen voimakenttä perustuu liukuvaan robotin mukana kulkevaan ruudukkoon, johon lasketaan varmuusarvoja esteistä. Vektorikenttähistogrammi jalostaa tätä eteenpäin rakentamalla ruudukosta suuntapohjaisen histogrammin.

Tämä tapa soveltuu erityisesti häiriöiseen ja epävarmaan mittaukseen, ja sitä onkin testattu ultraäänisensoreilla joihin liittyy lähes ominaisesti tietynlaista häiriötä. Ongelmallisia ovat kapeat käytävät, joissa robotti saattaa alkaa oskilloimaan seinästä toiseen.


\subsection{Puumenetelmät}

(Execution extended) Rapidly-exploring random tree \cite{bruce2003rrt} käyttää hyväkseen jo olemassaolevaa dataa ajoympäristöstä.


\subsection{Neuroverkot}

Neuroverkot soveltuvat sekä liikkuville roboteille että manipulaattoreille. \cite{yang2000neural} Ongelmana muun muassa hitaus verrattuna muihin; enemmän globaali kuin nopea lokaali menetelmä.

Manipulaattoreille ja tunnetulle kartalle löytyy tutkimusta. \cite{yang2004neural} Kuten myös liikkuvillekin roboteille ennalta halutulle reitille. \cite{noguchi1997path}

\cite{glasius1995neural}


\subsection{Konenäkö}

Konenäkö yleisesti soveltuu hyvin sisätiloissa seinien ja yksinkertaisten geometrioiden havainnointiin \cite[s. 245]{desouza2002vision}. Ulkotiloissa sisätilojen kaltaisia käytäviä ja huoneita ei ole, jolloin vastaavat menetelmät eivät välttämättä ole suoraan käytettävissä; tosin mikäli edessä on helposti samanlaista materiaalia, kuten puita tai suora autotie \cite[s. 255]{desouza2002vision}, toimii menetelmä hyvin.

Syvyysnäkö stereokameralla on myös varteenotettava vaihtoehto tavanomaisille antureille. \cite{murray2002stereo} Kuvassa ei ole esimerkiksi ultraäänisensoreille tyypillistä häiriötä tai epätarkkuutta, mutta se on laskennallisesti raskaampi. Hyvällä resoluutiolla ja pienellä kohinalla tosin saavutetaan näkö suhteellisen pitkälle, mutta kapeammalla keilalla kuin jos robottia ympäröisi 360 asteen tutkavyö.

\clearpage

\section{And now for something completely different}

Foo

\clearpage


\section{Yhteenveto}

Bar

\clearpage
\addcontentsline{toc}{section}{Viitteet}
\bibliography{kandi}

\end{document}


