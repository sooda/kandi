%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                %%
%% Esimerkki opinnytteen tekemisest LaTeX:lla 20100316          %%
%% Alkuperinen versio Luis Costa,  muutokset Perttu Puska        %%
%%                                                                %%
%% Thn esimerkkiin kuuluu tiedostot                             %%
%%               opinnaytepohja.tex (versio 1.3)                  %%
%%               aaltothesis.sty (versio 1.3)                     %%
%%               kuva1.eps                                        %%
%%               kuva2.eps                                        %%
%%                                                                %%
%%                                                                %%
%% Kntminen                                                    %%
%% latex:                                                         %%
%%             $ latex opinnaytepohja                             %%
%%             $ latex opinnaytepohja                             %%
%%                                                                %%
%%   Tuloksena on tiedosto opinnayte.dvi, joka                    %%
%%   muutetaan ps-muotoon seuraavasti                             %%
%%                                                                %%
%%             $ dvips opinnaytepohja -o                          %%
%%                                                                %%
%% Selittvt kommentit on tss esimerkiss varustettu           %%
%% %%-merkeill ja muutokset, joita kyttj voi tehd,           %%
%% on varustettu %-merkeill                                      %%
%%                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Kyt nit, jos kirjoitat suomeksi
%%
%% Use these you write in Finnish
\documentclass[finnish,12pt]{article}
%% Kyt nit, jos kirjoitat englanniksi
%%
%% Uncomment these if you write in English
%\documentclass[english,12pt]{article}

%% Tm paketti on pakollinen
%%
%% This package is required
\usepackage{aaltothesis}

\usepackage{natbib}
\bibliographystyle{plain} % finplain

% \usepackage[utf8]{inputenc}
%% Jos kytt latex-komentoa knnettess (oletusarvo) 
%% kuvat kannattaa tehd eps-muotoon. l kyt ps-muotoisia kuvia!
%% Kyt seuraavaa latex-komennon ja eps-kuvien kanssa 
%%
%% Use this if you run latex and use eps-format pictures
\usepackage[dvips]{graphicx}

%% Jos ts kytt pdflatex-komentoa, 
%% joka knt tekstin suoraan pdf-tiedostoksi ja kuvasi
%% ovat esim. jpg-formaatissa tai pdf-formaatissa,   
%% kytetn seuraavaa pakettia, kommentoi siis kommenttimerkki pois
%% Huom! Tekstin marginaalit saattavat poiketa n. 2-5 mm
%% suosituksesta, jos kytt pdflatex-komentoa!
%% 
%% Use this if you run pdflatex and use jpg/pdf-format pictures
%% Note that margins are not correct with pdflatex output. 
%\usepackage[pdftex]{graphicx} 

%% Saat pdf-tiedoston viittaukset ja linkit kuntoon seuraavalla paketilla.
%% Paketti toimii erityisen hyvin pdflatexin kanssa. 
%%
%% Use this if you want to get links and nice output with pdflatex
\usepackage[pdfpagemode=None,colorlinks=true,urlcolor=red,%
linkcolor=blue,citecolor=black,pdfstartview=FitH]{hyperref}

%% Jos et jostain syyst tykk kytt
%% edellist hyperref pakettia, voit kytt mys seuraavaa pakettia
%% (tarvitaan lhinn url-komennon mrittmiseen ja formatoimiseen)
%%
%% Use this if you do not like hyperref package - this
%% defines url environment and formats it correctly

% \usepackage{url}
%% Matematiikan fontteja, symboleja ja muotoiluja lis, nit tarvitaan usein 
%%
%% Use this if you write hard core mathematics, these are usually needed
\usepackage{amsfonts,amssymb,amsbsy}  

%% Vaakasuunnan mitat, L KOSKE!
\setlength{\hoffset}{-1in}
\setlength{\oddsidemargin}{35mm}
\setlength{\evensidemargin}{25mm}
\setlength{\textwidth}{15cm}
%% Pystysuunnan mitat, L KOSKE!
\setlength{\voffset}{-1in}
\setlength{\headsep}{7mm}
\setlength{\headheight}{1em}
\setlength{\topmargin}{25mm-\headheight-\headsep}
\setlength{\textheight}{23cm}


%% Kaikki mik paperille tulostuu, on tmn jlkeen
%%
%% Output starts here
\begin{document}

%% Korjaa vastaamaan korkeakouluasi
%%
%% Change the school field to describe your school 
\university{aalto university}{Aalto-yliopisto}
\school{School of science and technology}{Teknillinen korkeakoulu}

%% Korjaa seuraavat vastaamaan omaa tiedekuntaasi
%%
%% Change the faculty field to describe your faculty
\faculty{Faculty of Electronics, Communications and Automation}%
{Elektroniikan, tietoliikenteen ja automaation tiedekunta}%
%%

%% Vain kanditylle: Korjaa seuraavat vastaamaan tutkinto-ohjelmaasi
%%
%% Only for B.Sc. thesis: Choose your degree programme. 
\degreeprogram{Automation and control engineering}%
{Automaatio- ja säätötekniikka}
%%

%% Vain DI/M.Sc.- ja lisensiaatintylle: valitse laitos, 
%% professuuri ja sen professuurikoodi. 
%%
%% Only for M.Sc. and Licentiate thesis: Choose your department,
%% professorship and professorship code. 
%\department{Department of Radio Science and Technology}%
%{Radiotieteen ja -tekniikan laitos}
%\professorship{Circuit theory}{Piiriteoria}
%\code{S-55}
%%

%% Valitse yksi nist kolmesta
%%
%% Choose one of these:
\univdegree{BSc}
%\univdegree{MSc}
%\univdegree{Lic}

%% Oma nimi
%%
%% Should be self explanatory...
\author{Konsta Hölttä}

%% Opinnytteen otsikko tulee vain thn. l tavuta otsikkoa ja
%% vlt liian pitk otsikkoteksti. Jos latex ryhmittelee otsikon
%% huonosti, voit joutua pakottamaan rivinvaihdon \\ kontrollimerkill.
%% Muista ett otsikkoja ei tavuteta! 
%% Jos otsikossa on ja-sana, se ei j rivin viimeiseksi sanaksi 
%% vaan aloittaa uuden rivin.
%% 
%% Your thesis title. If the title is very long and the latex 
%% does unsatisfactory job of breaking the lines, you will have to
%% break the lines yourself with \\ control character. 
%% Do not hyphenate titles.
% TODO
\thesistitle{}{Esteenväistö- ja liikkeensuunnittelumenetelmät liikkuville roboteille
}

\place{Espoo}
%% Kandidaatintyn pivmr on sen esityspivmr! 
%% 
%% For B.Sc. thesis use the date when you present your thesis. 
\date{x.y.2010}

%% Kandidaattiseminaarin vastuuopettaja tai diplomityn valvoja.
%% Huomaa titteliss "\" -merkki pisteen jlkeen, 
%% ennen vlilynti ja seuraavaa merkkijonoa. 
%% Nin tehdn, koska kyseess ei ole lauseen loppu, jonka jlkeen tulee 
%% hieman pidempi vli vaan halutaan tavallinen vli.
%%
%% B.Sc. or M.Sc. thesis supervisor 
%% Note the "\" after the comma. This forces the following space to be 
%% a normal interword space, not the space that starts a new sentence. 
\supervisor{D.Sc.\ Ilkka Seilonen}{TkT Ilkka Seilonen}

%% Kandidaatintyn ohjaaja(t) tai diplomityn ohjaaja(t)
%% 
%% B.Sc. or M.Sc. thesis instructor(s)
%\instructor{Prof. Pirjo Professori}{Prof. Pirjo Professori}
\instructor{D.Sc.\ (Tech.) Jari Saarinen}{TkT Jari Saarinen}
%\instructor{M.Sc.\ (Tech.) Polli Pohjaaja}{DI Polli Pohjaaja}

%% Aaltologo: syntaksi: \uselogo{red|blue|yellow}{?|!|''}
%% Logon kieli on sama kuin dokumentin kieli
%%
%% Aalto logo: syntax: \uselogo{red|blue|yellow}{?|!|''} 
%% Logo language is set to be the same as the document language.
\uselogo{red}{''}{tkk}

%% Tehdn kansilehti
%%
%% Create the coverpage
\makecoverpage


%% Suomenkielinen tiivistelm
%% 
%% Finnish abstract
%%
%% Tiivistelmn avainsanat
\keywords{taika, musta magia, ydinfysiikka, rajatieto}
%% Tiivistelmn tekstiosa
\begin{abstractpage}[finnish]
Tutkitaan menetelmiä liikkuvien robottien reaaliaikaiseen esteenväistöön ja lokaaliin liikkeensuunnitteluun dynaamisessa ympäristössä.

Eritellään eri anturointitekniikoita, niihin soveltuvia esteentunnistusalgoritmeja ja robotin ohjaustapoja ja -malleja maaliin pääsemiseksi osumatta ympäristön yllättäviin muutoksiin.
\end{abstractpage}

\newpage

\mysection{Esipuhe}
Glxblt. Huu haa, foo bar.\\

\vspace{5cm}
Otaniemi, x.y.2010

\vspace{5mm}
{\hfill Konsta Hölttä \hspace{1cm}}

\newpage


%% Sisllysluettelo
%% addcontentsline tekee pdf-tiedostoon viitteen sisllysluetteloa varten
\addcontentsline{toc}{section}{Sisällysluettelo}
\tableofcontents

\mysection{Symbolit ja lyhenteet}

\subsection*{Lyhenteet}

\begin{tabular}{ll}
VFH	&	vector field histogram \\
DWA	&	dynamic window approach \\
AGV	&	automated guided vehicle \\
RRT	&	rapidly-exploring random tree
\end{tabular}


%% Sivulaskurin viilausta opinnytteen vaatimusten mukaan:
%% Aloitetaan sivunumerointi arabialaisilla numeroilla (ja jtetn
%% leiptekstin ensimminen sivu tyhjksi, 
%% ks. alla \thispagestyle{empty}).
%% Pakotetaan lisksi ensimminen varsinainen tekstisivu alkamaan 
%% uudelta sivulta clearpage-komennolla. 
%% clearpage on melkein samanlainen kuin newpage, mutta 
%% flushaa mys LaTeX:n floatit 
%% 
%% Corrects the page numbering, there is no need to change these
\cleardoublepage
\storeinipagenumber
\pagenumbering{arabic}
\setcounter{page}{1}



\section{Johdanto}

\thispagestyle{empty}

Liikkuva robotti, robotin paikannus, esteenväistö sekä liikkeensuunnittelu ovat sellaisinaan hyvin laajoja käsitteitä. Tämän tekstin tarkoituksena on kartoittaa eri menetelmiä eri ympäristöihin, painottuen kuitenkin erityisesti ulkotiloissa maanpinnalla vaihtelevassa ympäristössä kulkeviin robotteihin. Tässä (ja myöhemmin) robotilla tarkoitetaan itsenäisesti liikkuvaa ajoneuvoa, kuten AGV:tä, eikä kiinteästi asennettavaa robottia kuten manipulaattorikäsivartta.

Lokaaliin anturipohjaiseen esteenväistöön on luonnollisesti monia eri menetelmiä, joiden hyödyllisyys ja soveltuvuus riippuu robotin ympäristöstä ja anturien laadusta. Universaalia kaikkialle sopivaa lokaalia esteenväistöä ei ole olemassa. On tosin monia yleisiä menetelmiä (potentiaalikenttä, neuroverkot, satunnaispuut, jne, TODO: hyviä viitteitä tähän) ja tilannekohtaista heuristiikkaa. Myös aiemmista osittain jalostettuja kehittyneempiä tapoja (VFH jne) on saatu kartoittamalla heikkoudet ja soveltamalla tiettyyn ympäristöön; monia on testattu käytännössä, toisia simuloimalla ja jotkut ovat jääneet vain kaavoiksi.

Globaalia liikkeensuunnittelua (kartta tiedossa etukäteen jonka mukaan reitti suunnitellaan) sivutaan myös hieman. Tässä työssä keskitytään kuitenkin yhtäkkisten, odottamattomien esteiden havaitsemiseen ja väistämiseen kun jonkinlainen reitti on tiedossa ennalta -- joko aiemmin tarkasti suunniteltu kartta mutkineen ja risteyksineen, tai summittainen ohje luokkaa "50 metriä pohjoiseen". Reitin ja/tai ympäristön muutoksia saatetaan myös päivittää robotille reaaliajassa. Aina ei kuitenkaan voida saada mitään ennakkotietoa ympäristöstä, jossa robotti kulkee; tällöin tieto pitää kartoittaa matkan varrella.

Esteitä on havainnoitava jatkuvasti ja niitä voi väistää vasta havaitsemisen jlkeen. Yleisiä havainnointimenetelmiä ovat ultraäänianturit, laserskannerit ja konenäkö. Hyvillä menetelmillä anturointi onnistuu jatkuvasti; toisilla robotti joutuu välillä pysähtymään mittauksia varten.

Esteiden ohi selviämisen lisäksi robotin on pysyttävä reitillään ja sen on jotenkin saatava tietoa sijainnistaan ja suunnastaan. Tämäkin riippuu robotin antureista ja niiden sopivuudesta ympäristöön. Yleisesti käytettyjä tapoja paikannukseen ovat mm. odometria, maamerkit, gps, radiomajakat ja näkyvien seinien/maanmuotojen vertaaminen karttaan. Kaikki tavat ovat tosin jossain määrin epätarkkoja, joten virhearviot on otettava huomioon ja mielellään käytettävä useampaa tapaa rinnakkain.

TODO: kielioppi; filtteröi: tajunnanvirta -> tiedeteksti. tapa, menetelmä, .. synonyymejä?


\clearpage

\section{Pohjatutkimus}

Robotin navigoinnin pohjalla on hyvin paljon muitakin ongelmia, joihin tässä tekstissä ei oteta tarkemmin kantaa, vaan ne oletetaan ratkaistuiksi. Seuraavassa kuitenkin esitellään joitain perusasioita pyörillä kulkevan robotin liikkumisesta.

Jo muinaisissa roboteissa oli pyörät, ja ne yksinkertaisen mutta toimivan tekniikkansa vuoksi ovat ylivoimaisesti useimpien nykyrobottien liikkumisen perustana (TODO: joku papru tähän). Haastavassa maastossa käytetään jotain pyöristä jalostettua tapaa, kuten telaketjuja, piikikkäitä renkaita tai pyöriviä jalan kaltaisia läpysköitä (TODO: mikäs se tämmönen robo oli).

Pyörillä liikkumiseenkin on hyvin monia tapoja, joissa on kaikissa omat hyvät ja huonot puolensa. Tekniikka valittakoon robotin muodon ja kohdeympäristön mukaan. Usein käytettyjä ovat differentiaaliajo (kaksi erikseen ohjattavaa vetävää pyörää, ja mahdollisesti useampia tasoittamaan painoa; myös telaketjuajo on differentiaalinen), Ackermannin ohjaus (autoissa käytetty), synkronoitu ajo (synchro drive, TODO suomennos; monta jatkuvasti samaan suuntaan osoittavaa ja yhtä nopeasti pyörivää pyörää), ja omnidirectional (TODO jonka vois jättää mainitsemattaki).

Nivelletyillä jaloilla käveleviä robotteja tutkitaan nykyään yhä enemmän. Humanoidirobotit soveltuisivat hyvin ihmisille tarkoitettuun ympäristöön, ja näyttäisivät ihmisille luontevilta jolloin kanssakäyminen olisi helppoa ja ne voisivat hoitaa ihmisten tehtäviä yleisellä tasolla. Nivelletyt jalat sopivat myöskin haastavaan, epätasaiseen maastoon pyöreitä renkaita paremmin vaikkei olisikaan ihmisten kaltaisista roboteista kyse. Tätä on kokeiltu esimeriksi metsäkoneissa [TODO].

SNIP->
Aluksi on perehdyttävä tarkemmin aiheen käsitteisiin: mitä tarkoitetaan reitillä ja sen suunnittelulla? Mitä esteitä ylipäätään reitillä voi olla, ja millä tavoin eri tyyppisiin esteisiin on suhtauduttava? Millaiset (matemaattiset) menetelmät robotin navigoinnin takana yleensä ovat?
<-SNIP MIHIN TOI?

Paljon tutkimusta on tehty \cite{bonin2008visual} ja sitä tätä.

\clearpage

\section{Paikannus ja ympäristön havainnointi}% \section{Navigointi ja liikkeensuunnittelu yleisesti}
Itse esteiden väistämisen aiheuttaman reitin laskeminen on puhtaan laskennallista, mutta pohjalla on kuitenkin oikea ulkomaailma epätarkkuuksineen ja anturivirheineen. Tässä osiossa raapaistaan hieman eri havainnointikeinojen pintoja ja tutustutaan siihen, mitä tulee esteenväistöalgoritmeissa ottaa huomioon. Myöhemmin näitä ei enää erotella, ellei se ole väistömenetelmälle kovin oleellista.

\subsection{Paikannus}
Olennainen ongelma liikkuville roboteille on itsensä paikannus. Oletetaan robotin tietävän tarkasti jokin maalireitti tai -piste tietyssä koordinaatistossa; tällöin on tiedettävä missä itse robotti sijaitsee. Tähän voidaan käyttää tapauksesta riippuen esim. odometriaa, inertiasuunnistusta, majakoita tai maamerkkejä. Sensorifuusiota Kalman-suotimella voidaan myös hyödyntää, jolloin saadaan tarkempi tulos monen anturin yhdistetystä mittauksesta.

Odometria ja inertiasuunnistus ovat integroivia menetelmiä, ja pienetkin virheet kasautuvat pidemmän päälle, joten näitä ei voi käyttää yksinään. Odometria seuraa esim. pyörimisanturien avulla renkaiden liikkettä ja arvioi kuljettua matkaa; yleisiä virhelähteitä ovat renkaiden liukuminen, väärin mitattu ympärysmitta ja keskinäinen etäisyys, sekä ympäristön epäsystemaattiset virheet, kuten tuntemattomien ulkoisten häiriötekijöiden osuminen robottiin. Inertiasuunnistus integroi kiihtyvyysanturien mittauksia, ja on käytössä lähinnä jos renkaista tms. ei saada mitattua mitään. Epävarmojen mittauksien integrointi luonnollisesti kerryttää virhettä pidemmän päälle. (TODO: reflinkkei)

Majakoiden käyttö yhdistettynä edellisiin korjaa kertymävirheet. GPS on standardoitu bla bla ja tarjoaa kohtuullisen tarkkuuden ulkotiloissa (TODO: ref); parempaa vaatiessa ajoympäristöön voidaan rakentaa itse paikannusjärjestelmä, tai monen robotin ollessa kyseessä robotit voivat myös keskustella keskenään siten, että jokainen toimii kiinteiden majakoiden lisäksi yhtenä majakkana (TODO: ref). Majakat käyttävät paikannukseen kolmiomittausta, joka voi olla hyvinkin tarkka tai sitte ei aina. Odometrialla voidaan mitata hetkittäin paikallista liikettä, jota korjataan globaalisti majakoilla ajoittain integrointivirheiden eliminoimiseksi. (TODO: ref)

Maamerkit ovat yleinen käytäntö mm. AGV-vaunujen navigoinnissa (TODO: ref). Varastotiloissa voidaan upottaa lattiaan magneettiplplpl sekä kiinnittää seinään heijastimia, joiden etäisyys selvitetään laserilla ja joista lasketaan trigonometrian avulla robotin sijainti majakoiden tyyliin. Lattiaan kiinnitettävät maamerkit auttavat, kun näköetäisyys heijastimiin on huono, sekä antavat myös varsin tarkan päivitystiedon sijainnista, kunhan osataan erottaa maamerkit toisistaan.

Konenäöllä voidaan verrata ympäristön ulkonäköä ennalta määrättyyn karttaan, ja havainnoida sijainti korkeamman abstraktiotason maamerkeistä, kuten ihmiset tekevät. Tiettyjen säännönmukaisuuksien yhdistely muuhun anturidataan varmistaa globaalin sijainnin kartalla (TODO: ref). Kun robotti on hetki sitten tiennyt olevansa päälafkan lähistöllä, voidaan olettaa että kamerasta näkyvä talo on päälafka ja tarkentaa sijainti sen mukaisesti. Vastaavaa menettelyä voidaan hyödyntää myös 2D-mittauksessa esim. ultraääniantureilla (TODO: ref). Menetelmän ongelma on se sen keskeinen oletus, että ympäristöstä on ennalta olemassa jo jokin kartta, eikä tapa siis täysin tuntemattomassa ympäristössä toimi.

\clearpage % hmm...?
\subsection{Havainnointi}

Esteet on etsittävä robotin lähistöltä jollain lailla. Suosittuja tapoja ovat ultraäänianturit, laserskannerit ja kamerat. Bla blaa.

Ultraääni on yksinkertaisuutensa ja edullisuutensa ansiosta usein käytetty (TODO: ref). Sillä on tosin myös useita ongelmia. Ultraäänianturit eivät näe aivan lähellä olevia esteitä lainkaan, ovat hitaita ja havainnoivat kauempana olevat esteet epätarkemmin, sillä niiden lähettämä kaiku levenee keilamaisesti. Monesti käytetään myös useita antureita vierekkäin, jolloin saadaan leveä näkökenttä; tällöin viereisten anturien mittaukset saattavat heijastua toisilleen ("crosstalk". TODO: ref)

Laserskannereita on pääasiassa kahta tyyppiä: yksi- ja kaksiulotteisia. Yksiulotteiset pyörivät jatkuvasti ja skannaavat 360 asteen tutkakuvaa ympäristöstään; heijastuksista saadaan etäisyyspisteitä kartalle. Kaksiulotteiset toimivat stereonäkökameran lailla: edessä olevaa näkymää skannataan jatkuvasti tietyllä keilalla ja rasterilla kahdessa ulottuvuudessa, jolloin saadaan arvio edessä olevien esteiden etäisyyksistä. Nämä ovat tyypillisesti erittäin kalliita. (TODO: ref).

Heijastuksiin perustuvissa mittareissa on aina ongelmana vinojen pintojen havainnointi, kun kaiku ei heijastukaan takaisin robottia päin.

Kun erityisen tarkkaa kuvaa tarvitaan nopeasti, voidaan käyttää videokameroita, jos laskentatehoa riittää. Kahdella hyvin sijoitetulla kameralla onnistuu myös syvyysnäkö. Konenäkö on ylivoimaisesti kaikutekniikkaa parempi, kun tarvitaan tarkempaa tietoa pinnoista, kuten kuviointi tai asento. Myöskin kapeiden esteiden havainnointiin se soveltuu paremmin, koska nämä jäisivät kaiuilta helposti ohi. Esimerkiksi automaattiset henkilöautot käyttävät konenäköä tien reunojen havainnointiin (TODO: ref) ja peltoja automaattisesti lannoittavat robotit pysyvät konenäöllä taimien välissä (TODO: peltorobokisaref). Kuvan käsittely reaaliajassa vaatii huomattavasti enemmän konetehoa kuin yksiulotteiset tutkamenetelmät, ja kamera osoittaa vain yhteen suuntaan eikä sillä saada täyden ympyrän mittausta.

Tästä eteenpäin oletetaan, että esteet ja lähiympäristö on havaittu jollain menetelmällä, ja tietyllä varmuudella tiedetään ympäristön muoto ja mahdollisesti reitillä oleva este -- menetelmään sen enempää ottamatta kantaa. Keskitytään itse esteiden ohittamiseen.

Paikannus daa \cite{borenstein1996whereami}

Odometria \cite{borenstein1001umbmark}


\clearpage


\section{E.S.Teit}
Sisätiloissa toiminta eroaa ulkotiloista merkittävästi siinä, että tilasta voidaan tehdä muutamia yksinkertaistavia oletuksia. Robotti on oletettavasti aina samassa kulmassa maanpintaan nähden (tasainen lattia), esteet ovat mitä todennäköisimmin korkeahkoja ja kohtisuorassa maanpintaan nähden (seinät, hyllyt, ihmiset) ja rakennuksen pohjakuvasta saataneen hyvä kartta, joka voidaan approksimoida kaksiulotteiseksi. Renkailla liikkuminen on helppoa ja yhtäkkisiin kuoppiin tai kynnyksiin ei tarvinne kiinnittää huomiota. Näkymää voi tutkaskannata kohtuullisen luotettavasti jo ultraäänellä. Esteet tuskin liikkuvat ihmistä nopeammin. Mitkään näistä olettamuksista eivät päde ulkona tutkimattomassa ympäristössä.

Ulkona jo robotin mekaniikkaan on kiinnitettävä enemmän huomiota, esteenväistöstä ja -havainnoinnista puhumattakaan. Ulkotilat voidaan erotella edelleen kahtia kaupunkimaastoon ja muuhun tuntemattomaan metsään. Kaupunkimaaston haasteita ovat (TODO: googlaa) vinot ja käyrät pinnat joissa robotti lipsuu ja joissa kiinteät anturit voivat ottaa häiriömittauksia maanpinnasta mäkeä alas ajettaessa; ylös ajettaessa reunan yli ei nähdä ennen kuin maasto on taas tasaista. (TODO: ref). Liikkuvat esteet voivat olla autoja tai polkupyöriä, joita pitäisi väistää hyvin vikkelästi ja jotka täytyisi havainnoida jo kaukaa, jotta väistöliikkeen ehtisi tehdä. Tämä on erityisen kriittistä varsinkin robotisoiduissa henkilöautoissa. (TODO: ref)


- potfield, histogrammi, neuroverkko, randompuu, konenäkö.
- käytävät, vinot ja käyrät maastot, sikanihkee maasto (suo ja metsä)
- vfd aika geneerinen, mut sovellettava kun sellaisenaan kehno
- histogrammi soveltuu vain tutkasensoreille ja on yksiulotteinen
- neuroverkot varmaan käy mihin vaan
- ulkona todnäk käytettävä monia menetelmiä rinnakkain
	- paaljon heuristiikkaa jännätilanteita varten, kartoitettava ennalta
	- eri tilanteita monia, hallittava kai erikseen

\clearpage
\section{Tasaisen maaston esteenväistö}

\subsection{Potentiaalikenttä}

Keinopotentiaalikentät (artificial potential functions, artificial potential fields) ovat vanha \cite{warren2002apf}  \cite{rimon1992apf} mutta usein (sellaisenaan tai toisen navigointitavan pohjana) käytetty väistömenetelmä. Mitään oikeita fysikaalisia voimia nämä kentät eivät tuota robotille, jolloin kenttiä sanotaan keinotekoisiksi.

Potentiaalikentät syntyvät maalista ja esteistä; maali tuottaa puoleensavetävän ja esteet hylkivän potentiaalin. Käytetty potentiaalifunktio on esimeriksi etäisyyden käänteisarvo tai sen neliö tai (TODO: keksi jotain ja ota reffei). Maalin ja esteiden aiheuttavien potentiaalien gradienttien summasta saadaan robottiin kohdistuva ``voima'' jonka mukaan sitä kiihdytetään. Potentiaalikenttiä käytetään myös robottimanipulaattoreilla, mutta niitä ei tässä käsitellä.

Menetelmä toimii hyvin yksinkertaisissa ympäristöissä, mutta siinä on silti lukuisia ongelmia, jotka on otettava huomioon ja jalostettava menetelmää hieman eteenpäin (TODO cite ge+cui, new potential functions blabla). Lokaaleihin minimeihin voi jäädä loukkuun, lähekkäin olevien esteiden välistä ei pääse, kapeissa käytävissä syntyy helposti värähtelyä sekä maaliin voi olla mahdotonta päästä, jos sen toisella puolella on lähellä este.

Potentiaalifunktiot $U_att$ (attraktiivinen) ja $U_rep$ (repulsiivinen) ovat esimerkiksi (TODO: cite new blabla)

\begin{equation}
U_att(q) = \xi(q_goal - q),
\end{equation}

\begin{equation}
U_rep(q) = \begin{cases}
 \eta(\frac{1}{q_obs - q} - \frac{1}{\rho_0})^2 & \text{jos } |q_obs-q| <= \rho_0 \\
0 & \text{jos } |q_obs-q| > \rho_0
\end{equation}

missä $q$-vektori kuvaa robotin sijaintia ja asentoa ja $\xi$ ja $\eta$ ovat optimoitavia skaalauskertoimia. Voimat saadaan potentiaalikentän gradientista

\begin{equation}
F_att(q) = -\grad U_att(q) = \ksii(q_goal - q)
\end{equation}
ja kokonaisvoima on kaikkien yhdistelmä
\begin{equation}
F_tot(q) = F_att(q) + \sum F_rep(q).
\end{equation}

Potentiaalikentät toimivat parhaiten kun ympäristö on tiedossa, jolloin reittiä voidaan suunnitella kauemmas kerralla. Dynaamisessa ja tuntemattomassa ympäristössä näin ei ole, mutta koska voima lasketaan hetkellisesti ja potentiaalifunktiot ovat suhteellisen yksinkertaisia, soveltuu tämä tekniikka myös haluamaamme tilanteeseen. Etäisyys esteeseen saadaan esim. ultraäänianturilta, ja esteiden liikkuessa voima muuttuu kuten on tarvis.

Eri painokertoimet on optimoitava (TODO: eti reffei) robotin dynamiikan ja esteiden mukaan; robotin liike on jatkuvaa ja sillä on jokin massasta aiheutuva hitaus sekä tietty maksiminopeus, joista täytyy optimoida kenttien voimakkuus siten, ettei esteitä kierretä turhaan hyvin kaukaa, mutta samalla siten, että niihin ei voi törmätä. Tässäkin on tehtävä myös jotain oletuksia esteiden liikkumisnopeudesta.

Minimiongelmaan on esitetty useita ratkaisuja. Yksi mahdollinen on poistumisvoima, joka otetaan käyttöön jos huomataan robotin olevan lähellä minimiä. Tällöin kokonaisvoimaan lisätään esteiden hylkivää vaikutusta (TODO: mieti evolublablaa sivu 4 kaava 7 ja etsi muita).

Painoparametrien optimoinniksi on esitetty hyvyysfunktion minimointia \cite{vadakkepat2002eapf} plaa plaa, mikä sopii kun tiedetään koko kartta, muttei aivan kelpaa muuttuvaan ympäristöön. On myös ehdotettu (TODO cite soccergame/bjakenlinkkijuttu) virtuaalista robotin takana samaa rataa kulkevaa estettä, joka aiheuttaa voiman eteenpäin ja estää nollapotentiaalikuoppiin jumiutumisen. Tässäkin on ongelmana ko. voiman suuruuden optimointi.

Teoriassa kiva, käytännössä hankala optimoida robustiksi ja monipuoliseen ympäristöön soveltuvaksi.


\subsection{Histogrammit}

Borestein ja Koren toteavat potentiaalikentät riittämättömiksi ja esittävät niihin pohjautuvan virtual force field -menetelmän \cite{koren1991potential} ja siitä edelleen kehittyneen vector field histogram -tekniikan \cite{borenstein2002vfh}. Virtuaalinen voimakenttä perustuu liukuvaan robotin mukana kulkevaan ruudukkoon, johon lasketaan varmuusarvoja esteistä. Vektorikenttähistogrammi jalostaa tätä eteenpäin rakentamalla ruudukosta suuntapohjaisen histogrammin.

Tämä tapa soveltuu erityisesti häiriöiseen ja epävarmaan mittaukseen, ja sitä onkin testattu ultraäänisensoreilla joihin liittyy lähes ominaisesti tietynlaista häiriötä. Ongelmallisia ovat kapeat käytävät, joissa robotti saattaa alkaa oskilloimaan seinästä toiseen.


\subsection{Puumenetelmät}

(Execution extended) Rapidly-exploring random tree \cite{bruce2003rrt} käyttää hyväkseen jo olemassaolevaa dataa ajoympäristöstä ja iteroi robotin varsin hyvin maaliin.


\subsection{Neuroverkot}

Neuroverkot soveltuvat sekä liikkuville roboteille että manipulaattoreille. \cite{yang2000neural} Ongelmana muun muassa hitaus verrattuna muihin; enemmän globaali kuin nopea lokaali menetelmä.

Manipulaattoreille ja tunnetulle kartalle löytyy tutkimusta. \cite{yang2004neural} Kuten myös liikkuvillekin roboteille ennalta halutulle reitille. \cite{noguchi1997path}

\cite{glasius1995neural}


\subsection{Konenäkö}

Konenäkö yleisesti soveltuu hyvin sisätiloissa seinien ja yksinkertaisten geometrioiden havainnointiin \cite[s. 245]{desouza2002vision}. Ulkotiloissa sisätilojen kaltaisia käytäviä ja huoneita ei ole, jolloin vastaavat menetelmät eivät välttämättä ole suoraan käytettävissä; tosin mikäli edessä on helposti samanlaista materiaalia, kuten puita tai suora autotie \cite[s. 255]{desouza2002vision}, toimii menetelmä hyvin.

Syvyysnäkö stereokameralla on myös varteenotettava vaihtoehto tavanomaisille antureille. \cite{murray2002stereo} Kameralla otetussa kuvassa ei ole esimerkiksi ultraäänisensoreille tyypillistä häiriötä tai epätarkkuutta, mutta se on laskennallisesti raskaampi. Hyvällä resoluutiolla ja pienellä kohinalla tosin saavutetaan näkö suhteellisen pitkälle, mutta kapeammalla keilalla kuin jos robottia ympäröisi 360 asteen tutkavyö.


\section{And now for something completely different}

Foo

\clearpage


\section{Yhteenveto}

Bar

\clearpage
\addcontentsline{toc}{section}{Viitteet}
\bibliography{kandi}

\end{document}


